<h2 style="margin: 20px 0; text-align: center;">
  Admin Dashboard
</h2>

<div style="margin: 20px;">

  <!-- ============ Students ============ -->

  <h3>Students Management</h3>

  <p *ngIf="studentErrorMessage" style="color: red;">
    {{ studentErrorMessage }}
  </p>

  <button (click)="loadStudents()"
          style="margin-bottom: 10px; padding: 4px 10px;">
    Refresh Students
  </button>

  <button (click)="openCreateStudent()"
          style="margin-left: 8px; margin-bottom: 10px; padding: 4px 10px;">
    + Add Student
  </button>

  <div *ngIf="isStudentFormVisible"
       style="margin-bottom: 15px; padding: 10px; border: 1px solid #ccc; border-radius: 6px; max-width: 400px;">
    <h4 style="margin-top: 0;">
      {{ isEditingStudent ? 'Edit Student' : 'Create Student' }}
    </h4>

    <div style="margin-bottom: 8px;">
      <label>Full Name:</label><br />
      <input [(ngModel)]="studentForm.fullName"
             type="text"
             style="width: 100%; padding: 4px;" />
    </div>

    <div style="margin-bottom: 8px;">
      <label>Email:</label><br />
      <input [(ngModel)]="studentForm.email"
             type="email"
             style="width: 100%; padding: 4px;" />
    </div>

    <p *ngIf="studentFormError" style="color: red; margin-top: 4px;">
      {{ studentFormError }}
    </p>

    <button (click)="submitStudentForm()" style="padding: 4px 10px;">
      {{ isEditingStudent ? 'Update' : 'Create' }}
    </button>
    <button (click)="cancelStudentForm()"
            style="padding: 4px 10px; margin-left: 6px;">
      Cancel
    </button>
  </div>

  <table border="1" cellspacing="0" cellpadding="6"
         style="width: 100%; border-collapse: collapse; margin-bottom: 10px;">
    <thead style="background-color: #f0f0f0;">
      <tr>
        <th>ID</th>
        <th>Full Name</th>
        <th>Email</th>
        <th style="width: 160px;">Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let s of students">
        <td>{{ s.id }}</td>
        <td>{{ s.fullName }}</td>
        <td>{{ s.email }}</td>
        <td>
          <button (click)="openEditStudent(s)" style="margin-right: 6px;">
            Edit
          </button>
          <button (click)="deleteStudent(s.id)">
            Delete
          </button>
        </td>
      </tr>

      <tr *ngIf="students.length === 0 && !studentErrorMessage">
        <td colspan="4" style="text-align: center; color: gray;">
          No students found.
        </td>
      </tr>
    </tbody>
  </table>

  <mat-paginator
    [length]="studentsTotalItems"
    [pageSize]="studentsPageSize"
    [pageSizeOptions]="[5, 10, 20]"
    (page)="onStudentsPageChange($event)"
    showFirstLastButtons>
  </mat-paginator>

  <hr style="margin: 30px 0;" />

  <!-- ============ Teachers ============ -->

  <h3>Teachers Management</h3>

  <p *ngIf="teacherErrorMessage" style="color: red;">
    {{ teacherErrorMessage }}
  </p>

  <button (click)="loadTeachers()"
          style="margin-bottom: 10px; padding: 4px 10px;">
    Refresh Teachers
  </button>

  <button (click)="openCreateTeacher()"
          style="margin-left: 8px; margin-bottom: 10px; padding: 4px 10px;">
    + Add Teacher
  </button>

  <div *ngIf="isTeacherFormVisible"
       style="margin-bottom: 15px; padding: 10px; border: 1px solid #ccc; border-radius: 6px; max-width: 400px;">
    <h4 style="margin-top: 0;">
      {{ isEditingTeacher ? 'Edit Teacher' : 'Create Teacher' }}
    </h4>

    <div style="margin-bottom: 8px;">
      <label>Full Name:</label><br />
      <input [(ngModel)]="teacherForm.fullName"
             type="text"
             style="width: 100%; padding: 4px;" />
    </div>

    <div style="margin-bottom: 8px;">
      <label>Email:</label><br />
      <input [(ngModel)]="teacherForm.email"
             type="email"
             style="width: 100%; padding: 4px;" />
    </div>

    <p *ngIf="teacherFormError" style="color: red; margin-top: 4px;">
      {{ teacherFormError }}
    </p>

    <button (click)="submitTeacherForm()" style="padding: 4px 10px;">
      {{ isEditingTeacher ? 'Update' : 'Create' }}
    </button>
    <button (click)="cancelTeacherForm()"
            style="padding: 4px 10px; margin-left: 6px;">
      Cancel
    </button>
  </div>

  <table border="1" cellspacing="0" cellpadding="6"
         style="width: 100%; border-collapse: collapse; margin-bottom: 10px;">
    <thead style="background-color: #f0f0f0;">
      <tr>
        <th>ID</th>
        <th>Full Name</th>
        <th>Email</th>
        <th style="width: 160px;">Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let t of teachers">
        <td>{{ t.id }}</td>
        <td>{{ t.fullName }}</td>
        <td>{{ t.email }}</td>
        <td>
          <button (click)="openEditTeacher(t)" style="margin-right: 6px;">
            Edit
          </button>
          <button (click)="deleteTeacher(t.id)">Delete</button>
        </td>
      </tr>

      <tr *ngIf="teachers.length === 0 && !teacherErrorMessage">
        <td colspan="4" style="text-align: center; color: gray;">
          No teachers found.
        </td>
      </tr>
    </tbody>
  </table>

  <mat-paginator
    [length]="teachersTotalItems"
    [pageSize]="teachersPageSize"
    [pageSizeOptions]="[5, 10, 20]"
    (page)="onTeachersPageChange($event)"
    showFirstLastButtons>
  </mat-paginator>

  <hr style="margin: 30px 0;" />

  <!-- ============ Courses ============ -->

  <h3>Courses Management</h3>

  <p *ngIf="courseErrorMessage" style="color: red;">
    {{ courseErrorMessage }}
  </p>

  <button (click)="loadCourses()"
          style="margin-bottom: 10px; padding: 4px 10px;">
    Refresh Courses
  </button>

  <button (click)="openCreateCourse()"
          style="margin-left: 8px; margin-bottom: 10px; padding: 4px 10px;">
    + Add Course
  </button>

  <!-- Course Modal/Form -->
  <div *ngIf="isCourseFormVisible"
       style="margin-bottom: 15px; padding: 10px; border: 1px solid #ccc; border-radius: 6px; max-width: 450px;">
    <h4 style="margin-top: 0;">
      {{ isEditingCourse ? 'Edit Course' : 'Create Course' }}
    </h4>

    <div style="margin-bottom: 8px;">
      <label>Title:</label><br />
      <input [(ngModel)]="courseForm.title"
             type="text"
             style="width: 100%; padding: 4px;" />
    </div>

    <div style="margin-bottom: 8px;">
      <label>Description:</label><br />
      <textarea [(ngModel)]="courseForm.description"
                rows="3"
                style="width: 100%; padding: 4px;"></textarea>
    </div>

    <div style="margin-bottom: 8px;">
      <label>Teacher:</label><br />
      <select [(ngModel)]="courseForm.teacherId"
              style="width: 100%; padding: 4px;">
        <option [ngValue]="null">-- Select Teacher --</option>
        <option *ngFor="let t of teachers" [ngValue]="t.id">
          (ID: {{ t.id }}) {{ t.fullName }} - {{ t.email }}
        </option>
      </select>
    </div>

    <p *ngIf="courseFormError" style="color: red; margin-top: 4px;">
      {{ courseFormError }}
    </p>

    <button (click)="submitCourseForm()" style="padding: 4px 10px;">
      {{ isEditingCourse ? 'Update' : 'Create' }}
    </button>
    <button (click)="cancelCourseForm()"
            style="padding: 4px 10px; margin-left: 6px;">
      Cancel
    </button>
  </div>

  <table border="1" cellspacing="0" cellpadding="6"
         style="width: 100%; border-collapse: collapse; margin-bottom: 10px;">
    <thead style="background-color: #f0f0f0;">
      <tr>
        <th>ID</th>
        <th>Title</th>
        <th>Description</th>
        <th>Teacher ID</th>
        <th style="width: 160px;">Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let c of courses">
        <td>{{ c.id }}</td>
        <td>{{ c.title }}</td>
        <td>{{ c.description }}</td>
        <td>{{ c.teacherId }}</td>
        <td>
          <button (click)="openEditCourse(c)" style="margin-right: 6px;">
            Edit
          </button>
          <button (click)="deleteCourse(c.id)">Delete</button>
        </td>
      </tr>

      <tr *ngIf="courses.length === 0 && !courseErrorMessage">
        <td colspan="5" style="text-align: center; color: gray;">
          No courses found.
        </td>
      </tr>
    </tbody>
  </table>

  <mat-paginator
    [length]="coursesTotalItems"
    [pageSize]="coursesPageSize"
    [pageSizeOptions]="[5, 10, 20]"
    (page)="onCoursesPageChange($event)"
    showFirstLastButtons>
  </mat-paginator>

</div>
